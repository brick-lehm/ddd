
### 腐敗防止層とは？

上流から送信されてくる情報をそのまま使用するのではなく、
下流で使用するための情報に変換して使用するようにする手法です。

上流は、在庫に対する商品情報を下流に流します。
```json
{
	"stockId": "pdr_000001",
	"stock": 10
}
```


下流は、顧客に対する商品情報に変換する。
```json
{
	"productId": "pdr_000001", # ← 上流.productId
	"quantity": 10 # ← 上流.stock
}
```



### 利用方法

マイクロサービスである場合は、
上流（http）  --- 腐敗防止層  ---   下流（http）　のように腐敗防止層だけでサービスを作ると良さそう。

この構成を採用することで、
上流層のプロトコルをhttpからgRpcに変更する場合、
腐敗防止層がクッションになりgRpcに対応していない下流層にはhttpで通信するのように
プロトコルの翻訳もすることが可能になる。

下流層に直接腐敗防止層を実装する方法もあるけれど、
もしかしたらgRpcを受けるためのライブラリを追加することで稼働していた部分が稼働しなくなる。のようなことも考えられるため隠れたコストも回避できそう。
